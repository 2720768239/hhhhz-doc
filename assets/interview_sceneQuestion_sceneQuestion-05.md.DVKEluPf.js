import{_ as a,c as s,o as e,a4 as i}from"./chunks/framework.BnFbaH0K.js";const b=JSON.parse('{"title":"如何修改第三方 npm 包","description":"","frontmatter":{},"headers":[],"relativePath":"interview/sceneQuestion/sceneQuestion-05.md","filePath":"interview/sceneQuestion/sceneQuestion-05.md","lastUpdated":1726715942000}'),n={name:"interview/sceneQuestion/sceneQuestion-05.md"},t=i(`<h1 id="如何修改第三方-npm-包" tabindex="-1">如何修改第三方 npm 包 <a class="header-anchor" href="#如何修改第三方-npm-包" aria-label="Permalink to &quot;如何修改第三方 npm 包&quot;">​</a></h1><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>来自于设计、产品、老板的特殊需求</p><h2 id="方案" tabindex="-1">方案 <a class="header-anchor" href="#方案" aria-label="Permalink to &quot;方案&quot;">​</a></h2><ul><li>方式 1：对于稳定的库，直接下载下来，在 node_modules 中修改，然后拷贝到生产环境</li><li>方式 2：patch 方案</li><li>方式 3：fork package，自己来维护（对开发者要求较高）</li></ul><h3 id="patch-方案" tabindex="-1">patch 方案 <a class="header-anchor" href="#patch-方案" aria-label="Permalink to &quot;patch 方案&quot;">​</a></h3><p><code>patch-package</code></p><p>自动化</p><p><code>pnpm i patch-package postinstall-postinstall -D</code></p><p>npm 有很多钩子</p><ul><li>prepare</li><li>postinstall</li><li>publish 等多种 npm hook</li></ul><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;postinstall&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;patch-package&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>创建补丁</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> patch-packtage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 包名</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>会在项目 src 目录下生成一个文件夹<code>patches/包名+1.0.0.patch</code></p><h3 id="fork-github-fork" tabindex="-1">fork（github fork） <a class="header-anchor" href="#fork-github-fork" aria-label="Permalink to &quot;fork（github fork）&quot;">​</a></h3><p>直接改源码，自己构建，发布到 npm 私服（verdaccio、阿里云效制品库）</p><p>修改的内容，如果想共享给社区，给原作者提 PR，然后他们会 review、test、合并，然后将代码贡献给社区，可以提升知名度（长期主义）</p>`,18),p=[t];function l(r,h,o,c,d,k){return e(),s("div",null,p)}const m=a(n,[["render",l]]);export{b as __pageData,m as default};
